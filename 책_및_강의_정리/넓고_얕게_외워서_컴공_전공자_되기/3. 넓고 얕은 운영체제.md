# 3. 넓고 얕은 운영체제

## 3-1. 동시성과 병렬성

### 3-1-1. 동시성

서로 다른 두 가지 일이 개별적이지만 동시에 일어날 수 있다면, 서로 다른 두 가지 일은 동시성이 있다라고 말할 수 있으며 동시에 일어날 수 없다면 동시성이 없다라고 말할 수 있다. 예를들어 TV를 보는 일과 라면을 먹는 일은 동시에 할 수 있으니 동시성이 있다고 말할 수 있다.

### 3-1-2. 병렬성

병렬성이 있다는 것은 같은 일을 여러 주체가 함께 동시에 진행할 수 있다는 것을 의미한다.


## 3-2. 원자성, 동기화 그리고 교착상태(Deadlock)

원자성은 작업이 원자적으로 실행되어 다른 쓰레드에 의해 중단되거나 중간 상태로 남는 일이 없음을 보장하는 것으로, A와 B라는 서로 다른 쓰레드가 C라는 자원을 공유하여 사용할 때, A 쓰레드의 자원 C를 사용하여 작업하고 있을 때 B 쓰레드에 의해 종료되는 일이 없으며 작업 중간에 완료되지 못한 채 종료될 경우 자원 C는 쓰레드 A가 사용하기 전 상태로 돌아간다.

동기화는 서로 다른 쓰레드 간에 작업을 조율하여 일관성과 안정성을 유지하는 메커니즘을 말하며, 쓰레드 간에 자원을 공유하고 있는 경우에 동기화를 사용하여 예기치 않은 결과를 방지하고 데이터의 일관성을 유지할 수 있으며, 쓰레드 A 가 작업을 진행하며 자원 C가 변경되었을 때, 쓰레드 B는 쓰레드 A가 변경시킨 자원 C를 사용하는 것은 동기화의 일부분의 예시라고 생각할 수 있다.

**교착상태(Deadlock)란 멀티 프로세스 또는 멀티쓰레드 시스템에서 발생하며 서로 다른 쓰레드가 점유하고 있는 자원을 사용하기 위해 무한정 기다리고 있는 상태**를 의미하며, 교착상태는 **상호 배제, 점유 대기, 비선점, 순환 대기라는 네 가지 조건이 동시에 성립할 때 발생한다.**

- 교착상태 성립 조건 4가지
	1. **상호 배제 ( Mutual Exclusion )** : 최소한 하나의 자원은 동시에 한 프로세스 또는 쓰레드만이 사용할 수 있다.
	2. **점유 대기 ( Hold and Wait )** : 최소한 하나의 자원을 점유한 상태에서 다른 자원을 기다리고 있는 프로세스 또는 쓰레드가 있는 상태
	3. **비선점 ( No Preemption )** : 다른 프로세스 또는 스레드가 점유한 자원을 강제로 빼앗을 수 없는 상태
	4. **순환 대기 ( Circular Wait )** : 두 개 이상의 프로세스 또는 쓰레드가 자원을 기다리며 원형으로 연결된 상태




## 3-3. 컴퓨터의 구성요소

컴퓨터란 Hardware와 Software로 구성되며 Software는 Application Software와 System Software로 구분된다. 운영체제(Operating System / OS)는 대표적인 System Software이다. Application Software는 우리가 컴퓨터에 설치하고 사용하는 프로그램들로 엑셀, 파워포인트, 크롬 등이 존재하며 프로그램을 실핼하면 운영체제는 해당 프로그램의 프로세스를 생성하고 메모리에 올려 실행한다.

프로세스는 단일 쓰레드로 구성될 수도 있으나 여러 쓰레드를 동시에 실행할 수 있으며, 쓰레드는 프로세스 내에서 독립적인 실행흐름을 가지고 프로세스의 자원과 메모리 공간을 공유한다. 참고로 프로세스의 메모리 공간은 운영체제가 할당한다.

쓰레드가 사용하는 메모리 공간은 해당 쓰레드를 가지는 프로세스의 메모리 공간의 일부로 스택(Stack) 메모리 공간이며 힙(Heap) 메모리 공간은 프로그램의 메모리 관리에서 동적으로 할당되는 메모리 공간으로 힙 메모리 공간은 한 프로세스가 사용할 수 있으나 여러 프로세스가 같이 사용할 수 있는 메모리 공간이다.




## 3-4. 유저 모드와 커널모드

커널이란 운영체제(Operating System)의 핵심적인 부분으로 응용 프로그램 수행에 필요한 여러가지 서비스를 제공한다. 

- 커널의 역할
	1. I/O 제어 

		> 커널은 모든 입출력장치(키보드, 모니터, 마우스)와 컴퓨터(OS)를 연결해주는 역할을 한다. 커널은 입출력장치와 컴퓨터 사이에서 명령이나 데이터를 전달해주는데 이 때 디바이스 드라이버가 사용되며 디바이스 드라이버는 장치에 의존적이기 때문에 장치마다 장치 드라이브거 존재한다.

	2. 자원관리

		> 운영체제는 컴퓨터의 CPU, Memory, RAM 등 여러 자원(Resource)들을 관리하는 역할을 한다.

	3. 접근 통제

		> 사용자가 컴퓨터의 자원에 마음대로 접근하고 사용할 수 없도록 유저모드와 커널모드와 같이 사용자가 임의로 컴퓨터에 접근할 수 없도록 접근을 통제하는 역할을 한다.


### 3-4-1. 유저모드와 커널모드

커널에서는 중요하고 많은 자원들을 관리하기 때문에 사용자가 중요한 자원에 접근하지 못하게 2가지 모드를 제공한다. 대부분의 애플리케이션 프로그램들이 유저모드에서 실행되고 유저(사용자)가 접근할 수 있는 영역을 제한적으로 설정하여 프로그램의 자원에 마음대로 접근할 수 없도록 하는 역할을 하지만 커널모드에서는 컴퓨터의 모든 자원에 접근하고 명령할 수 있다는 점에서 유저모드와는 다른 특징을 가지고 있다.

















